name: Close Stale Issues

on:
  schedule:
    - cron: '0 0 * * *'  # Daily at midnight
  workflow_dispatch:  # Manual trigger

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/stale@v8
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # Issues
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          stale-issue-message: |
            This issue has been inactive for 60 days and will be closed in 14 days if there's no activity.
            
            If you're still experiencing this issue, please comment to keep it open.
          close-issue-message: |
            This issue was closed due to inactivity. Feel free to reopen if needed!
          
          # Pull Requests
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          stale-pr-message: |
            This PR has been inactive for 30 days and will be closed in 7 days.
            
            Please update or comment if you plan to continue working on this.
          close-pr-message: |
            This PR was closed due to inactivity. Feel free to reopen when ready!
          
          # Exemptions
          exempt-issue-labels: 'pinned,security,in-progress'
          exempt-pr-labels: 'pinned,in-progress,blocked'
          exempt-milestones: true
          exempt-assignees: true
